{"version":3,"sources":["pages/game/game.uvue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <view class=\"page\">\n    <view class=\"head\">\n      <text class=\"h1\">Game</text>\n      <text class=\"sub\">{{ turnText }}</text>\n    </view>\n\n    <view class=\"boardWrap\">\n      <view class=\"board\" :style=\"boardStyle\">\n        <view v-for=\"r in rows\" :key=\"'row_' + r\" class=\"boardRow\" :style=\"rowStyle\">\n          <view\n            v-for=\"c in cols\"\n            :key=\"r + '_' + c\"\n            class=\"cell\"\n            :class=\"cellClass(r, c)\"\n            :style=\"cellStyle\"\n            @tap=\"onTapCell(r, c)\"\n          >\n            <text class=\"piece\">{{ pieceAt(r, c) }}</text>\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <view class=\"panel\">\n      <view class=\"rowInfo rowFirst\">\n        <text class=\"label\">当前回合</text>\n        <text class=\"value\">{{ turnText }}</text>\n      </view>\n\n      <view class=\"rowInfo\">\n        <text class=\"label\">选中</text>\n        <text class=\"value\">{{ selectedText }}</text>\n      </view>\n\n      <view class=\"btns\">\n        <view class=\"btn\" @tap=\"resetBoard\">\n          <text class=\"btnText\">重置棋盘</text>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup lang=\"uts\">\nimport { ref, computed } from 'vue'\n\n/* 行列 */\nconst rows = [0,1,2,3,4,5,6,7]\nconst cols = [0,1,2,3,4,5,6,7]\n\n/* 尺寸 */\nconst boardPx = ref<number>(320)\n\nfunction clamp(n: number, minV: number, maxV: number): number {\n  if (n < minV) return minV\n  if (n > maxV) return maxV\n  return n\n}\n\nfunction calcBoardPx(): number {\n  // ✅ 关键：显式使用 GetSystemInfoResult（强类型，允许字段访问）\n  const info: GetSystemInfoResult = uni.getSystemInfoSync()\n  let ww: number = info.windowWidth\n\n  // 页面 padding：18*2=36\n  let px = ww - 36\n  px = clamp(px, 240, 360)\n\n  // 对齐到 8 的倍数\n  px = px - (px % 8)\n  return px\n}\n\nboardPx.value = calcBoardPx()\n\nconst cellPx = computed((): number => boardPx.value / 8)\n\n/* style 字符串 */\nconst boardStyle = computed((): string => {\n  const px = boardPx.value.toString() + 'px'\n  return 'width:' + px + ';height:' + px + ';'\n})\n\nconst rowStyle = computed((): string => {\n  const w = boardPx.value.toString() + 'px'\n  const h = cellPx.value.toString() + 'px'\n  return 'width:' + w + ';height:' + h + ';'\n})\n\nconst cellStyle = computed((): string => {\n  const px = cellPx.value.toString() + 'px'\n  return 'width:' + px + ';height:' + px + ';flex:0 0 ' + px + ';'\n})\n\n/* 对弈 */\ntype Turn = 'white' | 'black'\nconst turn = ref<Turn>('white')\n\nclass Pos {\n  r: number\n  c: number\n  constructor(r: number, c: number) {\n    this.r = r\n    this.c = c\n  }\n}\nconst selected = ref<Pos | null>(null)\n\n/* Unicode */\nconst BR = '♜', BN = '♞', BB = '♝', BQ = '♛', BK = '♚', BP = '♟'\nconst WR = '♖', WN = '♘', WB = '♗', WQ = '♕', WK = '♔', WP = '♙'\n\ntype Board = (string | null)[][]\nfunction createInitBoard(): Board {\n  return [\n    [BR, BN, BB, BQ, BK, BB, BN, BR],\n    [BP, BP, BP, BP, BP, BP, BP, BP],\n    [null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, null, null, null],\n    [WP, WP, WP, WP, WP, WP, WP, WP],\n    [WR, WN, WB, WQ, WK, WB, WN, WR]\n  ]\n}\nconst board = ref<Board>(createInitBoard())\n\nfunction pieceAt(r: number, c: number): string {\n  const p = board.value[r][c]\n  return p == null ? '' : p\n}\n\nfunction isWhitePiece(p: string): boolean {\n  return p == WR || p == WN || p == WB || p == WQ || p == WK || p == WP\n}\nfunction isBlackPiece(p: string): boolean {\n  return p == BR || p == BN || p == BB || p == BQ || p == BK || p == BP\n}\n\nfunction onTapCell(r: number, c: number) {\n  const piece = board.value[r][c]\n\n  if (selected.value == null) {\n    if (piece == null) return\n    if (turn.value == 'white' && isWhitePiece(piece)) selected.value = new Pos(r, c)\n    else if (turn.value == 'black' && isBlackPiece(piece)) selected.value = new Pos(r, c)\n    return\n  }\n\n  const sr = selected.value.r\n  const sc = selected.value.c\n  const moving = board.value[sr][sc]\n  if (moving == null) { selected.value = null; return }\n\n  if (\n    piece != null &&\n    ((turn.value == 'white' && isWhitePiece(piece)) ||\n     (turn.value == 'black' && isBlackPiece(piece)))\n  ) {\n    selected.value = new Pos(r, c)\n    return\n  }\n\n  board.value[r][c] = moving\n  board.value[sr][sc] = null\n  selected.value = null\n  turn.value = (turn.value == 'white') ? 'black' : 'white'\n}\n\nfunction cellClass(r: number, c: number): string {\n  let cls = ((r + c) % 2 == 1) ? 'dark' : 'light'\n  if (selected.value != null && selected.value.r == r && selected.value.c == c) {\n    cls = cls + ' selected'\n  }\n  return cls\n}\n\nconst selectedText = computed((): string => {\n  if (selected.value == null) return '无'\n  const file = String.fromCharCode(97 + selected.value.c)\n  const rank = (8 - selected.value.r).toString()\n  return file + rank\n})\n\nconst turnText = computed((): string => (turn.value == 'white' ? '白方回合' : '黑方回合'))\n\nfunction resetBoard() {\n  board.value = createInitBoard()\n  selected.value = null\n  turn.value = 'white'\n}\n</script>\n\n<style >.page {\n  padding: 18px;\n  display: flex;\n  flex-direction: column;\n}\n\n.head {\n  margin-bottom: 12px;\n}\n\n.h1 {\n  font-size: 20px;\n  font-weight: 700;\n}\n\n.sub {\n  font-size: 12px;\n  opacity: 0.6;\n  margin-top: 4px;\n}\n\n.boardWrap {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  margin-bottom: 14px;\n}\n\n/* 棋盘尺寸由 uvue 动态注入 */\n.board {\n  border-radius: 14px;\n  overflow: hidden;\n  border: 1px solid rgba(0,0,0,0.12);\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n}\n\n.boardRow {\n  display: flex;\n  flex-direction: row;\n}\n\n.cell {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  flex-shrink: 0;\n}\n\n.light { background: #f0d9b5; }\n.dark  { background: #b58863; }\n\n.selected {\n  border: 3px solid rgba(31,111,235,0.9);\n  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.25);\n}\n\n.piece {\n  font-size: 26px;\n  line-height: 26px;\n}\n\n.panel {\n  padding: 14px;\n  border-radius: 14px;\n  border: 1px solid rgba(0,0,0,0.08);\n  background: rgba(0,0,0,0.02);\n}\n\n.rowInfo {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px 0;\n  border-top: 1px solid rgba(0,0,0,0.06);\n}\n\n.rowFirst {\n  border-top: none;\n  padding-top: 0;\n}\n\n.label {\n  font-size: 12px;\n  opacity: 0.6;\n}\n\n.value {\n  font-size: 14px;\n  font-weight: 700;\n}\n\n.btns {\n  margin-top: 12px;\n}\n\n.btn {\n  height: 42px;\n  border-radius: 12px;\n  background: rgba(31,111,235,0.12);\n  border: 1px solid rgba(31,111,235,0.25);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.btnText {\n  font-size: 14px;\n  font-weight: 700;\n}\n</style>\n"]}